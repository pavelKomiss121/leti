# Ход работы по курсовой: Rain in Australia

Файл для фиксации выполненных действий, возникших проблем и решений. Используется для быстрого написания отчёта и контроля прогресса.

---

## Общие сведения

| Параметр | Значение |
|----------|----------|
| Датасет | weatherAUS.csv (Rain in Australia) |
| Параметр n | Humidity3pm |
| Параметр m | Rainfall |
| Целевая переменная | RainTomorrow (Yes/No) |

---

## ЧАСТЬ 1. Подготовительный этап и разведочный анализ (EDA)

### Задание 1. Первичная обработка данных

**Что сделано:**
- [x] Создана структура проекта (course_work/data, figures, текст)
- [x] Файл датасета размещён в `course_work/data/weatherAUS.csv`
- [x] Загрузка данных в notebook (`course_work.ipynb`) с учётом NA в CSV
- [x] Описание вида данных и особенностей (в отчёте/notebook)
- [x] Проверка пропусков, дубликатов, аномалий (таблица % пропусков; аномалии Rainfall, Humidity3pm)
- [x] Реализована стратегия обработки: дроп столбцов >40% пропусков, импутация медианой/модой, Date→datetime, IQR для Rainfall и Humidity3pm, дроп строк без RainTomorrow
- [x] Решение по Location: столбец сохранён для анализа; в моделях при необходимости — дроп (49 уникальных)
- [x] Выведен размер выборки после обработки и `df.describe()`

**Проблемы и решения:**

| Проблема | Решение |
|----------|---------|
| Слишком агрессивный IQR (удаление строк): терялось ~20% данных, Rainfall max падал до 1.5 мм, доля Yes резко снижалась | Заменено на **winsorize**: Rainfall — ограничение по 99-му перцентилю; Humidity3pm — winsorize по 1.5×IQR. Удаляются только экстремальные аномалии (Rainfall &lt;0 или &gt;300 мм, Humidity3pm вне [0,100]). Строки не удаляются массово. |
| *(добавлять по мере появления)* | |

**Результаты (кратко):** *(заполнить после запуска notebook)*
- Размер выборки до обработки: ~145 000 строк
- Размер после обработки: *см. вывод ячейки «Итоговый размер»*
- Удалённые столбцы: Evaporation, Sunshine, Cloud9am, Cloud3pm (при >40% пропусков)

---

### Задание 2. Визуализация и описательная статистика

**Что сделано:**
- [x] Графики распределения n и m по классам RainTomorrow (подписи, легенда, сетка) — `task2_distributions_by_class.png`
- [x] Таблица: медиана, среднее, СКО для n и m (вся выборка + по классам) — вывод в консоль в `viz.print_descriptive_stats`
- [x] Разбивка выше/ниже медианы по n и по m: гистограмма, scatterplot, boxplot; оценка СКО — `task2_above_below_median_*.png`
- [x] Оценка сбалансированности классов; график bar + pie — `task2_class_balance.png`
- [ ] Интерпретация несбалансированности и СКО (в т.ч. по Морроу) — добавить в отчёт
- [x] Сохранение графиков в `figures/`

**Проблемы и решения:**

| Проблема | Решение |
|----------|---------|
| | |

**Результаты (кратко):**
- Доля классов: No … %, Yes … %
- Ключевые выводы по графикам: …

---

## ЧАСТЬ 2. Моделирование и прогнозирование

### Задание 3. Корреляционный анализ

**Что сделано:**
- [x] Тепловая карта корреляций (Пирсон и Спирмен) — `task3_heatmap_pearson.png`, `task3_heatmap_spearman.png`
- [x] Коэффициенты Пирсона и Спирмена по числовым признакам; связь n, m с целевой — вывод в консоль
- [x] Мультиколлинеарность: пары с |r| > 0.8 — вывод в консоль (VIF при необходимости в Задании 4)

**Проблемы и решения:**

| Проблема | Решение |
|----------|---------|
| | |

**Результаты (кратко):**
- Сильные связи (примеры): см. вывод программы и тепловые карты

---

### Задание 4. Регрессионный анализ

**Что сделано:**
- [x] Простая линейная регрессия: n от m и m от n; train/test с stratify=RainTomorrow (80/20)
- [x] Метрики: R², MSE, RMSE; значимость коэффициентов (statsmodels OLS)
- [x] График остатков (предсказание vs остаток) — `task4_residuals.png`
- [ ] (Опц.) Множественная регрессия со StandardScaler — при необходимости добавить

**Проблемы и решения:**

| Проблема | Решение |
|----------|---------|
| | |

**Результаты (кратко):**
- R² (n от m), R² (m от n): см. вывод программы (ожидаемо низкий R² ~0.05–0.15)
- Интерпретация: связь не строго линейна — ограничение модели (по Морроу)

---

## ЧАСТЬ 3. Проверка статистических гипотез

### Задание 5. Подготовка к сравнению групп (опционально)

**Что сделано:**
- [ ] Проверка нормальности (Шапиро-Уилка / Колмогоров-Смирнов)
- [ ] Проверка однородности дисперсий (Левен / Бартлетт)
- [ ] Обоснование выбора критерия (t-test или Манна-Уитни)

**Проблемы и решения:**

| Проблема | Решение |
|----------|---------|
| | |

---

### Задание 6. Дисперсионный анализ (ANOVA)

**Что сделано:**
- [x] Формулировка H₀: средние Humidity3pm не различаются между классами RainTomorrow
- [x] Проверка предпосылок: тест Левена (однородность дисперсий)
- [x] Расчёт F и p-value (scipy.stats.f_oneway)
- [x] Размер эффекта eta-squared
- [x] Примечание в выводе: при 2 классах ANOVA эквивалентна t-test; пост-хок — только при >2 групп

**Проблемы и решения:**

| Проблема | Решение |
|----------|---------|
| | |

**Результаты (кратко):**
- F = … , p = … ; вывод: …

---

### Задание 7. Создание классификатора

**Что сделано:**
- [x] Логистическая регрессия, дерево решений, MLP (hidden_layer_sizes=(50,))
- [x] Признаки: только числовые (n, m и др.); Location и категориальные дропнуты
- [x] StandardScaler; train/test stratify, 80/20
- [x] Метрики: матрица ошибок, Accuracy, Precision, Recall, F1, AUC; ROC-кривые — `task7_roc_curves.png`
- [x] Балансировка: class_weight='balanced' (LogReg, Tree); SMOTE на train по умолчанию (use_smote=True) — улучшает recall для Yes
- [x] Сводная таблица по моделям в консоли

**Проблемы и решения:**

| Проблема | Решение |
|----------|---------|
| | |

**Результаты (кратко):**
- Лучшая модель по F1/AUC: см. вывод программы
- Влияние SMOTE: при необходимости передать use_smote=True в run_task7

---

## Итоги для отчёта

**Основные выводы по работе:**
- *(заполнить в конце)*

**Что учесть при написании отчёта:**
- Размер выборки и причина подвыборки (если использовалась)
- Все проблемы из таблиц выше → раздел «Проблемы и их решение» или врезки в текст
- Ссылки на рисунки: figures/ с единой нумерацией (Рисунок 1, 2, …)
- Уровни аналитики по Морроу: 1–2 предложения на часть

**Дата последнего обновления:** *(обновлять по мере работы)*
